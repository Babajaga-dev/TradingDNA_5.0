# Configurazione ottimizzata per sistema con 4x RTX 3060

simulator:
  initial_capital: 10000
  min_candles: 50
  data_file: "market_data_BTC_1m.csv"

trading:
  position:
    size_pct: 5
    stop_loss_pct: 2.0
    take_profit_pct: 4.0

  indicators:
    entry:
      indicator1:
        type: "SMA"
        params:
          timeperiod: 20
      indicator2:
        type: "SMA"
        params:
          timeperiod: 50
      operator: "cross_above"

    exit:
      indicator1:
        type: "RSI"
        params:
          timeperiod: 14
      indicator2:
        type: "CLOSE"
        params: {}
      operator: ">"

  volatility_gene:
    enabled: true
    parameters:
      timeperiod:
        min: 5
        max: 100
        default: 14
      multiplier:
        min: 0.4
        max: 2.5
        default: 1.0
      base_position_size:
        min: 0.5
        max: 15.0
        default: 5.0
      atr_limits:
        min_size: 0.5
        max_size: 25.0

  momentum_gene:
    enabled: true
    parameters:
      momentum_threshold:
        min: 50
        max: 90
        default: 70
      trend_strength:
        min: 15
        max: 35
        default: 25
      overbought_level:
        min: 70
        max: 90
        default: 80
      oversold_level:
        min: 10
        max: 30
        default: 20
      rsi:
        timeperiod: 14
      stochastic:
        fastk_period: 14
        slowk_period: 3
        slowd_period: 3
      adx:
        timeperiod: 14

  pattern_gene:
    enabled: true
    parameters:
      required_patterns:
        min: 1
        max: 4
        default: 2
      pattern_window:
        min: 2
        max: 7
        default: 3
      confirmation_periods:
        min: 1
        max: 4
        default: 1
    patterns:
      - ENGULFING
      - HAMMER
      - DOJI
      - EVENINGSTAR
      - MORNINGSTAR
      - HARAMI
      - SHOOTINGSTAR
      - MARUBOZU

genetic:
  # Ottimizzato per 4x RTX 3060 (49.5 TFLOPS totali)
  population_size: 512       # Aumentato per sfruttare la potenza di calcolo
  generations: 200          # Aumentato per una ricerca più approfondita
  mutation_rate: 0.45
  elite_size: 8             # Aumentato per preservare più soluzioni ottime
  tournament_size: 6
  min_trades: 50
  parallel_processes: 32    # Ottimizzato per 2x Xeon E5-2682 v4 (64 thread totali)
  batch_size: 64           # Ottimizzato per la memoria GPU della 3060 (12GB)
  memory_reserve_gb: 8     # Riservato per sistema (48GB RAM totali)
  memory_per_process_mb: 512  # Aumentato per processi più efficienti

  # Parametri anti-plateau ottimizzati
  mutation_decay: 0.995
  diversity_threshold: 0.25
  restart_threshold: 10
  improvement_threshold: 0.002
  restart_elite_fraction: 0.15
  restart_mutation_multiplier: 2.2

  optimizer:
    use_gpu: true          # Abilitato per le 4x RTX 3060
    torch_threads: 64      # Ottimizzato per i thread CPU disponibili
    batch_norm: true
    device_config:
      precision: "float32"   # Le RTX 3060 supportano FP32 nativamente
      memory_reserve: 2048  # 2GB per GPU riservati
      max_batch_size: 2048  # Ottimizzato per memoria GPU
      mixed_precision: true # Abilitato per migliori performance
      cuda_graph: true
      profiler: false
    linux_specific:
      num_workers: 16      # Ottimizzato per il sistema multi-CPU
      pin_memory: true
      shared_memory: true
      process_affinity: true

  ensemble_weights:
    base_gene: 0.3
    volatility_gene: 0.25
    momentum_gene: 0.25
    pattern_gene: 0.2

  fitness_weights:
    profit_score:
      total_pnl: 0.35
      max_drawdown: 0.25
      sharpe_ratio: 0.40
    quality_score:
      win_rate: 0.45
      trade_frequency: 0.25
      consistency: 0.30
    final_weights:
      profit: 0.50
      quality: 0.40
      diversity: 0.10

download:
  symbol: "BTCUSDT"
  interval: "1m"
  start_date: "2024-06-09"
  end_date: null
  batch_size: 1000
  output_folder: "data"
  api:
    key: ""
    secret: ""
